(self.mfeModules=self.mfeModules||[]).push(["pcmall-productshopvouchers",["React","ReactRedux","Redux","PlatformApi","ReactRouter","WithInjectReducer","FeatureToggles","Account","ReactDom","Platform","NebulaCore"],function(e,r,t,o,n,i,c,u,a,s,p){return(self["mfeStartuppcmall-pcpagevoucherdetail"]||function(){})(556),["pcmall-pcpagevoucherdetail",(self.wpJsonpPcmallPcpagevoucherdetail=self.wpJsonpPcmallPcpagevoucherdetail||[]).push([[556,951],{6781:function(e,r,t){"use strict";var o=t(3804),n=t(6704),i=t(5735);function c(){return(c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}r.Z=function(e){var r=o.forwardRef((function(r,t){return o.createElement(i.Z,{onTrack:n.Tracking.onTrack},o.createElement(e,c({},r,{ref:t})))})),t=function(e){return e.displayName||e.name||"Component"}(r);return r.displayName="WithFlashSaleWrap("+t+")",r}},144:function(e,r,t){"use strict";t.d(r,{Z:function(){return L}});var o=t(3804),n=t.n(o),i=t(2815),c={productShopVoucher:"_1v21H2",voucher:"_1HW0fp",voucherLeftInfo:"_3bSUDv",voucherRightContainer:"J5KS9N",btnContainer:"_1kvm2E",voucherLeft:"_3ovy3V",logo:"X8Xhsq",header:"_2_kJZD",expiry:"U0cGFA",specificProduct:"v-9gpT",voucherClaimFieldSolid:"_3HPrsD",officialHeader:"_3lBBw8",preferredHeader:"dVDdyf",sMartHeader:"P_rj0N",useLaterBtn:"_1qFSLl",applyBtn:"_1-Inc9"},u=t(36),a=t.n(u),s=t(6870),p=t(1053),l=t(4742),h=t(429),f=t(6775),d=t(6704),v=t(9607),g=t(5377),m=t(5325),_=t(351),y=t(119),S=t(6866),O=t(2738),E=t(6781),w={progress:y.Z.INIT},L=(0,E.Z)((0,d.withI18nCollections)([i.L])((function(e){var r=e.voucher,t=e.voucherLocation,o=e.className,i=e.isShopeeMart,u=r.is_shop_official,E=r.shop_id,L=r.promotionid,N=r.voucher_code,b=r.percentage_used,C=(0,f.useHistory)(),I=(0,m.useSelector)((function(e){return(0,v.Au)(e.featureToggles,g.v_0)})),P=(0,S.oW)(),x=function(){var e=(0,_.D)(r,{useVLP:I,enableEncodeUrl:P});(0,O.np)(r)&&(e=(0,O.Xz)(r,e)),e&&C.push(e)},D=(0,m.useSelector)((function(e){return r&&r.voucher_code&&e.voucher.claimProgress[r.voucher_code]||w})),T=r.is_claimed_before||D.progress===y.Z.OK?(0,O.np)(r)?2:1:0,R={location:t,shopid:E,promotion_id:L,status:T,voucher_code:N,usage_progress:b},V=(0,l.Z)("ShopVoucherSmall.ProductPageSellerVoucherBody",R,[T]);return n().createElement(h.ZP,{targetType:"ShopVoucherSmall",targetData:{voucher:r,voucherLocation:t}},n().createElement("div",{ref:V,className:a()(c.productShopVoucher,o)},n().createElement(s.rO,{className:c.voucher,voucher:r,type:p.wK.FLAT_WITH_SHADOW,usePreferredShopColorScheme:!0,isOfficial:u,isShopeeMart:i},n().createElement(s.Tg,{className:c.voucherLeft,sawtoothClassName:c.voucherLeftSawtooth,voucher:r,voucherLocation:t,onClick:x},n().createElement("div",{className:c.voucherLeftInfo},n().createElement(s.PU,{sizeStyle:"small",className:c.header}),n().createElement(s.s_,{isOfs:u,className:c.specificProduct,voucher:r,isShopeeMart:i}),n().createElement(s.EU,{className:c.expiry,voucher:r,upcomingGrayText:!0}))),n().createElement(s.Ec,{className:c.voucherRightContainer},n().createElement(s.ve,{voucher:r,className:c.voucherClaimFieldSolid,containerClassName:c.btnContainer,applyBtnClassName:a()(c.applyBtn,(0,O.np)(r)&&c.useLaterBtn),afterClaim:x,applyText:(0,d.t)("label_voucher_seller_voucher_use"),shouldExpandButtonClickArea:!0})),n().createElement(s.Vp,{onTop:!0}))))})))},6510:function(e,r,t){"use strict";t.d(r,{Z:function(){return R}});var o=t(3804),n=t.n(o),i=t(36),c=t.n(i),u=t(5325),a=t(6775),s=t(8993),p=t(8851),l=t(5886),h=t(6231);function f(){return(f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function d(e,r){return(d=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var v,g,m,_,y,S,O,E,w,L,N,b,C,I,P=t(6704),x=t(2815),D=t(144),T=t(6781),R=(0,T.Z)((0,P.withI18nCollections)([x.L])((v=function(e){var r=e.vouchers,t=e.isShopeeMart;return r&&0!==r.length?n().createElement("div",{className:c()("product-shop-vouchers",e.className)},n().createElement("div",{className:"product-shop-vouchers__header"},(0,P.t)("label_shop_voucher")),n().createElement("div",{className:"product-shop-vouchers__list",style:{maxHeight:"23.25rem"},tabIndex:-1},!!r&&r.slice(0,50).map((function(e,r){return n().createElement(D.Z,{className:"_3v4TxM",key:"product-detail-page-seller-voucher-"+r,voucher:e,voucherLocation:r,isShopeeMart:t})})))):null},m=(g={selector:function(e){return e.voucher},autoFetch:!1}).selector,y=void 0===(_=g.autoFetch)||_,O=void 0!==(S=g.fetchStatus)&&S,w=void 0!==(E=g.forceRender)&&E,N=void 0!==(L=g.isLite)&&L,C=void 0!==(b=g.needPriorityVoucher)&&b,I=function(e){var r,t;function n(r){var t;return(t=e.call(this,r)||this).universalDataFetch=function(){var e,r,o=t.props,n=o.shopId,i=o.itemId,c=o.requestCallback,u=o.isRequesting,a=o.vouchers,s=o.priorityVoucherList;if(n){var p=t.getPriorityVoucherParams(),l=p?[{promotionid:p.priorityPromotionId,signature:p.prioritySignature,signature_source:p.prioritySignatureSource}]:void 0,h=!!a,f=(r=s,!(!(e=l)&&!r||Array.isArray(e)&&Array.isArray(r)&&e[0]&&r[0]&&e[0].promotionid===r[0].promotionid&&e[0].signature===r[0].signature&&e[0].signature_source===r[0].signature_source));if((i||!h||f)&&!u&&y)return N?t.props.fetchShopVouchersLite({shopId:n,withClaimingStatus:O,priorityVoucherList:l,requestCallback:c}):t.props.fetchShopVouchers({shopId:n,itemId:i,withClaimingStatus:O,priorityVoucherList:l,requestCallback:c})}},t}t=e,(r=n).prototype=Object.create(t.prototype),r.prototype.constructor=r,d(r,t);var i=n.prototype;return i.componentDidMount=function(){!this.props.isRequesting&&y&&this.universalDataFetch()},i.componentDidUpdate=function(e){e.shopId===this.props.shopId&&e.itemId===this.props.itemId||this.universalDataFetch()},i.getPriorityVoucherParams=function(){if(C){var e=this.props,r=e.location,t=e.shopId,o=(0,h.AW)(r.search);return o.priorityPromotionId&&o.prioritySignature&&o.prioritySignatureSource?{priorityPromotionId:parseInt(o.priorityPromotionId,10),prioritySignature:o.prioritySignature,prioritySignatureSource:o.prioritySignatureSource}:function(e){return(l.y.getItem("SHOP_PRIORITY_VOUCHER_STORAGE")||{})[e]}(t)}},i.render=function(){var e=this.props.vouchers;return!y||e&&e.length||w?o.createElement(v,f({loadVouchers:this.universalDataFetch},this.props)):null},n}(o.Component),(0,u.connect)((function(e,r){return{vouchers:(0,s.oL)(m(e),r.shopId,r.itemId),priorityVoucherList:(0,s.zM)(m(e),r.shopId),isRequesting:(0,s.Sz)(m(e),r.shopId,r.itemId)}}),{fetchShopVouchers:p.Rd,fetchShopVouchersLite:p._8})((0,a.withRouter)(I)))))},8993:function(e,r,t){"use strict";function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function n(e,r,t){var o=e&&e.shop&&e.shop[r];if(t){var n=o&&o[t];return n?n.vouchers:null}return o?o.vouchers:null}function i(e,r){var t=e&&e.shop&&e.shop[r];return t?t.priorityVoucherList:null}function c(e,r){return e&&e.recommendedShopVouchers&&e.recommendedShopVouchers[r]||[]}function u(e){return Object.entries(e.claimProgress||[]).reduce((function(e,r){var t,n=r[0],i=r[1];return o({},e,((t={})[n]=i.progress,t))}),{})}function a(e,r){if(!r)return 0;var t=e.claimProgress[r];return t?t.progress:0}function s(e,r,t){var o=e&&e.shop&&e.shop[r];return t?-100===(o&&o[t]||{}).error:o&&-100===o.error}function p(e,r,t){if(!t)return{};var o=e&&e.voucherDetail&&e.voucherDetail[r||"0"];return o&&o[t]||{}}t.d(r,{oL:function(){return n},zM:function(){return i},zq:function(){return c},HL:function(){return u},KT:function(){return a},Sz:function(){return s},hy:function(){return p}})},5321:function(e,r,t){var o=t(6704).FetchUtils;e.exports=o},4612:function(e,r,t){"use strict";t.d(r,{v:function(){return o.config}});var o=t(6704)},2420:function(e,r,t){var o={"./ar.png":1803,"./br.png":1031,"./cl.png":7914,"./co.png":2710,"./es.png":4130,"./fr.png":8841,"./id.png":59,"./in.png":7236,"./mx.png":185,"./my.png":9913,"./ph.png":633,"./pl.png":2127,"./sg.png":4816,"./th.png":2219,"./tw.png":9669,"./vn.png":4400};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=2420},421:function(e,r,t){var o={"./ar.png":3806};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=421},6967:function(e,r,t){var o={"./ar.png":8729,"./br.png":8559,"./cl.png":9170,"./co.png":2550,"./es.png":5781,"./fr.png":4232,"./id.png":4307,"./in.png":592,"./mx.png":1913,"./my.png":5630,"./ph.png":468,"./pl.png":5581,"./sg.png":2040,"./th.png":5639,"./tw.png":483,"./vn.png":3007};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=6967},9748:function(e,r,t){var o={"./ar.png":8282,"./br.png":5230,"./cl.png":9933,"./co.png":4121,"./es.png":9714,"./fr.png":3563,"./id.png":5193,"./in.png":770,"./mx.png":2266,"./my.png":2147,"./ph.png":4836,"./pl.png":5493,"./sg.png":569,"./th.png":1076,"./tw.png":5634,"./vn.png":1596};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=9748},8602:function(e,r,t){var o={"./popup_apponly@2x.png":5514,"./popup_mall_apponly@2x.png":4506};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=8602},1906:function(e,r,t){var o={"./popup_apponly_tw@2x.png":6504,"./popup_mall_apponly_tw@2x.png":7172};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=1906},6686:function(e){"use strict";e.exports=u},1437:function(e){"use strict";e.exports=c},6161:function(e){"use strict";e.exports=s},6704:function(e){"use strict";e.exports=o},3804:function(r){"use strict";r.exports=e},7274:function(e){"use strict";e.exports=a},5325:function(e){"use strict";e.exports=r},6775:function(e){"use strict";e.exports=n},4857:function(e){"use strict";e.exports=t}},0,[[6510,666,450]]]),"Z",null]},1]),function(){if(window&&window.__DECKER_HOOK__){var e=window.__DECKER_HOOK__;function r(){e.sendToDevtools("MFE_LOAD_SLOT",{slotName:"pcmall-productshopvouchers",tag:"pc-v5.2.0",branch:"heads/pc-v5.2.0",lastCommit:"[RELEASE] pc-v5.2.0",lastCommitHash:"b80a1b11a59bf0834776b1baa920a45558d739dd",updated:"2022-03-25T06:44:12.434Z"})}e.on("MFE_RETRIEVE_SLOTS",r),r()}}();